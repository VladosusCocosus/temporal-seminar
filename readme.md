## Что такое temporal?

Temporal.io — оркестратор workflow (workflow engine), основные преимущества которой являются отказоустойчивыми, 
масштабируемыми и отказоустойчивыми. Temporal предоставляет workflow, которые определяются как
последовательности activities, 
которые могут выполняться долго и с отслеживанием состояния. Ключевое преимущество
Temporal заключается в том, что он обеспечивает надежность рабочих процессов и их
продолжение даже после сбоев, перезапусков или сбоев.

### Workflow
Workflow в Temporal — это последовательность шагов или задач (activities), в которых и есть бизнес логика.
Рабочие процессы могут выполняться днями, неделями или даже годами, надежно сохраняя свое состояние.

Workflow отслеживают состояние и управляются событиями. Temporal использует источник событий для отслеживания
истории выполнения каждого рабочего процесса, что позволяет беспрепятственно восстанавливаться после сбоев или сбоев.


### Activities
Activities - это кусочек бизнес логики, там можно делать что угодно, ходить в базу, обращаться к внешним сервисам

Важно: Temporal умеет перезапускать activities в зависимости от retry policy


## Важный плюс Temporal

### Temporal и отказоустойчивость
Temporal умеет запускать workflow с места на котором оно неуспешно закончилось
Это относится у случаям, когда произошел сбой сети, сервер был экстренно выключен или подобное

### Масштабируемость
Temporal позволяет быстро масштабировать воркеры простым добавлением реплик 
Temporal сам занимается балансировкой нагрузки
Ограничения: 
 * База данных (postgres в нашем случае)
 * Длительные и одновременно с этим сложные workflow

### Работа со временем
Temporal имеет внутренние таймеры, которые позволяет очень удобно работать с задержками
Наш кейс:
Отправка писем для групп, где выставлено откладывание это процесса, бывает что нужно отложить отправку более чем на сути

## Основные причины для использования
* Есть необходимость в управлении долгими и сложными асинхронными процессами
* Много асинхронных задач
* Масштабируемость


## Scheduling
* Temporal позволяет запускать workflow как сразу так и отложено
```typescript
const options = {
  cronSchedule: '0 0 * * *'
};
await client.start(myWorkflow, options);
```

* Temporal позволяет пользоваться делеями и таймера внутри workflow 
```typescript
Workflow.sleep(10 * 60 * 1000);
 ```

Имеются policy для настройки максимального количества времени
* Start-to-close timeout
* Schedule-to-start timeout
* Schedule-to-close timeout
